@using BlogEngine.Core.Packaging

@{
    Page.Title = Resources.labels.theme;
    Layout = "~/admin/_Layout.cshtml";
    
    var loaderSrc = Path.Combine(BlogEngine.Core.Blog.CurrentInstance.RelativeWebRoot, "pics/ajax-loader.gif");

    var tab = "1";
    if(!string.IsNullOrEmpty(Request.QueryString["t"])){
        tab = Request.QueryString["t"];   
    }

    var page = 1;
    if(!string.IsNullOrEmpty(Request.QueryString["p"])){
        page = int.Parse(Request.QueryString["p"]);
    }
}

 <script type="text/javascript">
     $(document).ready(function () {
         $('.loader2').hide();
         if (Querystring('t') == '2') {
             GalleryGetPackages(1);
         }
     });
</script>

<div class="content-box-outer">
    <div class="content-box-right">
        @RenderPage("_menu.cshtml")
	</div>
    <div class="content-box-left">
        <h1>
            Themes
            @if (tab == "1")
            {
            <a href="Themes.cshtml?t=2" class="image-gallery cboxElement">Gallery</a>
            }
            else
            {
                <a href="Themes.cshtml" class="image-gallery cboxElement">Installed</a>
            }
        </h1>

        <div>
            @if (tab == "1")
            {
            @Helpers.AdminHelper.InstalledThemes()
            }
            else
            {
            <div class="gallery-options">
                <div id="gallery-search">
                    <input type="text" value="" id="searchGallery" />
                    <input type="submit" id="btnGalSearch" class="btn primary" onclick="GalleryGetPackages(1); return false;" value="Search" />
                </div>
                <span>Order by: </span>
                <select id="gallery-sort-order" onchange="GalleryGetPackages(1)">
                    <option value="Alphanumeric">Alphanumeric</option>
                    <option value="Downloads">Downloads</option>
                    <option value="Newest" selected="selected">Newest</option>
                </select>
                <img class="loader2" src="@loaderSrc" alt="loader" />
            </div>
            <div id="Container"></div>
            <div id="Pager"></div>
            }
        </div>
        <div class="clear"></div>
    </div>
</div>